# 商弦矿铁通长线路图组合器

与[商弦矿铁通长生成器](https://k.guc1010.top/Sig/tongchang)联用，生成符合[商弦](https://guc1010.top)标准的整张通长图片。生成效果如图：

![dh1+00+#](./README.assets/dh1+00+%23.png)

![sh3+03-](./README.assets/sh3+03-.png)

## 使用方法

- 在 `通长组合器.exe` 程序相同文件夹下，新建 `images` 文件夹，所有图块均放入此 `images` 文件夹；
- 在 `通长组合器.exe` 程序相同文件夹下，新建 `stations.txt`，写入各线路车站信息；
- 双击运行 `通长组合器.exe`，组合好的图片会生成在 `output` 文件夹内。

### `stations.txt` 规则

本仓库中有 `stations.txt` 的示例。单条线路的信息以<u>商弦</u>矿铁 8 号线为例：

```
8:8+01,8+00
8+02,<2
8+01,<2,>2
8+00,<2
8-01,<2
8-02,<2
```

第一行开头 `8:` 表示线路号，其后的 `8+01,8+00` 表示在通长线路图中此两站应总是居中；按从正到负的顺序写。

从第二行起，每行为一个站号及该站应使用的通长样式，站号应按从正到负的顺序写。若上下行通长样式相同，则写 `<站号>,<通长样式>`；否则写 `<站号>,<+方向通长样式>,<-方向通长样式>`。其中，从右向左（左侧开门）为 `<`，从左向右（右侧开门）为 `>`；单行（22:1）为 `1`，双行（20:2）为 `2`。如 `8+01,<2,>2` 表示：在 8+01 车站，+ 方向的通长为从右向左，使用双行样式；- 方向的通长为从左向右，使用双行样式。

多条线路的信息之间用空行隔开。

### 图块命名规则

线路图上的 128×128 车站图块可用通长生成器来生成，应将其文件名改为 `tc<站号><结尾>.png`，其中站号形如`<路号><+|-><站号数字>`，结尾如下表：

| 左, 右 | 未到站  |   当前站   |  已过站   |
| :----: | :-----: | :--------: | :-------: |
| 起点站 |    /    | `@`, `@#`  | `=`, `#=` |
| 中途站 | 无, 无  | `@`, `@=`  | `=`, `=`  |
| 终点站 | 无, `#` | `@=`, `@#` |     /     |

例：

- 站号为 2-01，是未到的站，本站左侧开门，线路图为从右向左，则命名为 `tc2-01.png`；
- 站号为 7+01，是当前站，本站右侧开门，线路图从左向右，则命名为 `tc7+01=.png`；

其他图块需手动制作，包括：

- 箭头，128×128：`tczuo.png`、`tcyou.png`
- 路号，128×128：`tc<路号><方向>.png`
- 分隔竖线，128×128：`tcfenge.png`
- 本站站名，256×128：`tczm<站号>.png`
- 「开往」，128×128：`tckaiwang.png`
- 终点站站名，256×128：`tckw<路号><方向：+|->.png`
- 「终点站」，256×128：`tczhongdianzhan.png`
- 线路标识色的底部框线，128×128：`tc<路号>.png`
- 线路标识色的底部箭头，128×128：`tc<路号>zuo.png`、`tc<路号>you.png`

## 构建方法

克隆此仓库至任意文件夹；安装 `go` 语言环境，执行 `go build .`。